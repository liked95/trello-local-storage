{"ast":null,"code":"import { ADD_CARD, ADD_LIST, DELETE_LIST } from \"./constants\";\nimport _ from 'lodash';\nexport const initialListState = {\n  listOrder: ['list-1', 'list-2', 'list-1'],\n  lists: [{\n    id: 'list-1',\n    title: \"My title 1\",\n    cardOrder: ['card-2', 'card-1', 'card-3'],\n    cards: [{\n      id: 'card-1',\n      listId: 'list-1',\n      content: \"Lorem 1\"\n    }, {\n      id: 'card-2',\n      listId: 'list-1',\n      content: \"Lorem 2\"\n    }, {\n      id: 'card-3',\n      listId: 'list-1',\n      content: \"Lorem 3\"\n    }]\n  }, {\n    id: 'list-2',\n    title: \"My title 2\",\n    cardOrder: ['card-5', 'card-4', 'card-6'],\n    cards: [{\n      id: 'card-4',\n      listId: 'list-2',\n      content: \"Anonymous 4\"\n    }, {\n      id: 'card-5',\n      listId: 'list-2',\n      content: \"Anonymous 5\"\n    }, {\n      id: 'card-6',\n      listId: 'list-2',\n      content: \"Anonymous 6\"\n    }]\n  }, {\n    id: 'list-3',\n    title: \"My title 3\",\n    cardOrder: ['card-8', 'card-7', 'card-9'],\n    cards: [{\n      id: 'card-7',\n      listId: 'list-3',\n      content: \"Anonymous 7\"\n    }, {\n      id: 'card-8',\n      listId: 'list-3',\n      content: \"Anonymous 8\"\n    }, {\n      id: 'card-9',\n      listId: 'list-3',\n      content: \"Anonymous 9\"\n    }]\n  }]\n};\nconst listReducer = (state, action) => {\n  switch (action.type) {\n    case ADD_LIST:\n      {\n        const listOrder = [...state.listOrder, action.payload.id];\n        const lists = _.cloneDeep(state.lists);\n        lists.push({\n          id: action.payload.id,\n          title: action.payload.title,\n          cards: action.payload.cards,\n          cardOrder: action.payload.cardOrder\n        });\n        console.log({\n          ...state,\n          listOrder,\n          lists\n        });\n        return {\n          ...state,\n          listOrder,\n          lists\n        };\n      }\n    case DELETE_LIST:\n      {\n        let listId = action.payload;\n        let listOrderIdx = state.listOrder.indexOf(listId);\n        const listOrder = [...state.listOrder].splice(listOrderIdx, 1);\n        let listIdx = state.lists.indexOf(listId);\n        const lists = _.cloneDeep(state.lists);\n        lists.splice(listIdx, 1);\n        return {\n          ...state,\n          listOrder,\n          lists\n        };\n      }\n    case ADD_CARD:\n      {\n        console.log(action.payload);\n        const {\n          listId,\n          id,\n          content\n        } = action.payload;\n        const lists = _.cloneDeep(state.lists);\n        lists.map(list => {\n          if (list.id !== listId) {\n            return list;\n          }\n\n          // if listId is matched\n          list.cards.push({\n            id,\n            listId,\n            content\n          });\n          list.cardOrder.push(id);\n          return list;\n        });\n        console.log(lists);\n        return {\n          ...state,\n          lists\n        };\n      }\n    default:\n      return state;\n  }\n};\nexport default listReducer;","map":{"version":3,"names":["ADD_CARD","ADD_LIST","DELETE_LIST","_","initialListState","listOrder","lists","id","title","cardOrder","cards","listId","content","listReducer","state","action","type","payload","cloneDeep","push","console","log","listOrderIdx","indexOf","splice","listIdx","map","list"],"sources":["D:/trello/src/store/reducer.js"],"sourcesContent":["import { ADD_CARD, ADD_LIST, DELETE_LIST } from \"./constants\"\r\nimport _ from 'lodash'\r\nexport const initialListState = {\r\n    listOrder: ['list-1', 'list-2', 'list-1'],\r\n    lists: [\r\n        {\r\n            id: 'list-1',\r\n            title: \"My title 1\",\r\n            cardOrder: ['card-2', 'card-1', 'card-3'],\r\n            cards: [\r\n                {\r\n                    id: 'card-1',\r\n                    listId: 'list-1',\r\n                    content: \"Lorem 1\",\r\n                },\r\n                {\r\n                    id: 'card-2',\r\n                    listId: 'list-1',\r\n                    content: \"Lorem 2\",\r\n                },\r\n                {\r\n                    id: 'card-3',\r\n                    listId: 'list-1',\r\n                    content: \"Lorem 3\",\r\n                },\r\n            ]\r\n        },\r\n        {\r\n            id: 'list-2',\r\n            title: \"My title 2\",\r\n            cardOrder: ['card-5', 'card-4', 'card-6'],\r\n            cards: [\r\n                {\r\n                    id: 'card-4',\r\n                    listId: 'list-2',\r\n                    content: \"Anonymous 4\",\r\n                },\r\n                {\r\n                    id: 'card-5',\r\n                    listId: 'list-2',\r\n                    content: \"Anonymous 5\",\r\n                },\r\n                {\r\n                    id: 'card-6',\r\n                    listId: 'list-2',\r\n                    content: \"Anonymous 6\",\r\n                },\r\n            ]\r\n        },\r\n        {\r\n            id: 'list-3',\r\n            title: \"My title 3\",\r\n            cardOrder: ['card-8', 'card-7', 'card-9'],\r\n            cards: [\r\n                {\r\n                    id: 'card-7',\r\n                    listId: 'list-3',\r\n                    content: \"Anonymous 7\",\r\n                },\r\n                {\r\n                    id: 'card-8',\r\n                    listId: 'list-3',\r\n                    content: \"Anonymous 8\",\r\n                },\r\n                {\r\n                    id: 'card-9',\r\n                    listId: 'list-3',\r\n                    content: \"Anonymous 9\",\r\n                },\r\n            ]\r\n        }\r\n    ]\r\n}\r\n\r\nconst listReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case ADD_LIST: {\r\n            const listOrder = [...state.listOrder, action.payload.id]\r\n            const lists = _.cloneDeep(state.lists)\r\n            lists.push({\r\n                id: action.payload.id,\r\n                title: action.payload.title,\r\n                cards: action.payload.cards,\r\n                cardOrder: action.payload.cardOrder,\r\n\r\n            })\r\n            console.log({ ...state, listOrder, lists })\r\n            return { ...state, listOrder, lists }\r\n        }\r\n\r\n        case DELETE_LIST: {\r\n            let listId = action.payload\r\n            let listOrderIdx = state.listOrder.indexOf(listId)\r\n            const listOrder = [...state.listOrder].splice(listOrderIdx, 1)\r\n            let listIdx = state.lists.indexOf(listId)\r\n            const lists = _.cloneDeep(state.lists)\r\n            lists.splice(listIdx, 1)\r\n\r\n            return { ...state, listOrder, lists }\r\n        }\r\n\r\n        case ADD_CARD: {\r\n            console.log(action.payload)\r\n            const { listId, id, content } = action.payload\r\n            const lists = _.cloneDeep(state.lists)\r\n\r\n            lists.map(list => {\r\n                if (list.id !== listId) {\r\n                    return list\r\n                }\r\n\r\n                // if listId is matched\r\n                list.cards.push({\r\n                    id,\r\n                    listId,\r\n                    content,\r\n                })\r\n\r\n                list.cardOrder.push(id)\r\n                return list\r\n            })\r\n\r\n            console.log(lists)\r\n\r\n            return {...state, lists}\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default listReducer \r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}