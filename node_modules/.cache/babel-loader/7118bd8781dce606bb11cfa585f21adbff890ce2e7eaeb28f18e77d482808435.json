{"ast":null,"code":"import { ADD_CARD, ADD_LIST, DELETE_LIST, UPDATE_LIST_ORDER, UPDATE_CARDS_SAME_LIST } from \"./constants\";\nimport _ from 'lodash';\nimport { saveToLocal } from \"../utils\";\nexport const initialListState = {\n  listOrder: ['list-1', 'list-2', 'list-3'],\n  lists: [{\n    id: 'list-1',\n    title: \"My title 1\",\n    cardOrder: ['card-2', 'card-1', 'card-3'],\n    cards: [{\n      id: 'card-1',\n      listId: 'list-1',\n      content: \"First 1\"\n    }, {\n      id: 'card-2',\n      listId: 'list-1',\n      content: \"First 2\"\n    }, {\n      id: 'card-3',\n      listId: 'list-1',\n      content: \"First 3\"\n    }]\n  }, {\n    id: 'list-2',\n    title: \"My title 2\",\n    cardOrder: ['card-5', 'card-4', 'card-6'],\n    cards: [{\n      id: 'card-4',\n      listId: 'list-2',\n      content: \"Second 4\"\n    }, {\n      id: 'card-5',\n      listId: 'list-2',\n      content: \"Second 5\"\n    }, {\n      id: 'card-6',\n      listId: 'list-2',\n      content: \"Second 6\"\n    }]\n  }, {\n    id: 'list-3',\n    title: \"My title 3\",\n    cardOrder: ['card-8', 'card-7', 'card-9', 'card-10', 'card-11'],\n    cards: [{\n      id: 'card-7',\n      listId: 'list-3',\n      content: \"Third 7\"\n    }, {\n      id: 'card-8',\n      listId: 'list-3',\n      content: \"Third 8\"\n    }, {\n      id: 'card-9',\n      listId: 'list-3',\n      content: \"Third 9\"\n    }, {\n      id: 'card-10',\n      listId: 'list-3',\n      content: \"Third 10\"\n    }, {\n      id: 'card-11',\n      listId: 'list-3',\n      content: \"Third 11\"\n    }]\n  }]\n};\nconst listReducer = (state, action) => {\n  let clonedState = _.cloneDeep(state);\n  switch (action.type) {\n    case ADD_LIST:\n      {\n        const listOrder = [...clonedState.listOrder, action.payload.id];\n        const lists = _.cloneDeep(clonedState.lists);\n        lists.push({\n          id: action.payload.id,\n          title: action.payload.title,\n          cards: action.payload.cards,\n          cardOrder: action.payload.cardOrder\n        });\n        saveToLocal(\"data\", {\n          ...clonedState,\n          listOrder,\n          lists\n        });\n        return {\n          ...clonedState,\n          listOrder,\n          lists\n        };\n      }\n    case DELETE_LIST:\n      {\n        let listId = action.payload;\n        console.log(listId);\n        let listOrderIdx = clonedState.listOrder.indexOf(listId);\n        console.log(listId);\n        const listOrder = clonedState.listOrder.splice(listOrderIdx, 1);\n        let listIdx = clonedState.lists.indexOf(listId);\n        const lists = _.cloneDeep(clonedState.lists);\n        lists.splice(listIdx, 1);\n        saveToLocal(\"data\", {\n          ...clonedState,\n          listOrder,\n          lists\n        });\n        return {\n          ...clonedState,\n          listOrder,\n          lists\n        };\n      }\n    case ADD_CARD:\n      {\n        console.log(action.payload);\n        const {\n          listId,\n          id,\n          content\n        } = action.payload;\n        const lists = _.cloneDeep(clonedState.lists);\n        lists.map(list => {\n          if (list.id !== listId) {\n            return list;\n          }\n\n          // if listId is matched\n          list.cards.push({\n            id,\n            listId,\n            content\n          });\n          list.cardOrder.push(id);\n          return list;\n        });\n        console.log(lists);\n        saveToLocal(\"data\", {\n          ...clonedState,\n          lists\n        });\n        return {\n          ...clonedState,\n          lists\n        };\n      }\n    case UPDATE_LIST_ORDER:\n      {\n        // console.log(action.payload)\n        let newState = {\n          ...clonedState,\n          listOrder: action.payload\n        };\n        saveToLocal(\"data\", newState);\n        // console.log(\"newState \", newState);\n        return newState;\n      }\n    case UPDATE_CARDS_SAME_LIST:\n      {\n        // console.log(action.payload)\n        const {\n          listId,\n          dragCardId,\n          dropListId\n        } = action.payload;\n        return state;\n      }\n    default:\n      return state;\n  }\n};\nexport default listReducer;","map":{"version":3,"names":["ADD_CARD","ADD_LIST","DELETE_LIST","UPDATE_LIST_ORDER","UPDATE_CARDS_SAME_LIST","_","saveToLocal","initialListState","listOrder","lists","id","title","cardOrder","cards","listId","content","listReducer","state","action","clonedState","cloneDeep","type","payload","push","console","log","listOrderIdx","indexOf","splice","listIdx","map","list","newState","dragCardId","dropListId"],"sources":["D:/trello/src/store/reducer.js"],"sourcesContent":["import { ADD_CARD, ADD_LIST, DELETE_LIST, UPDATE_LIST_ORDER, UPDATE_CARDS_SAME_LIST } from \"./constants\"\r\nimport _ from 'lodash'\r\nimport { saveToLocal } from \"../utils\"\r\nexport const initialListState = {\r\n    listOrder: ['list-1', 'list-2', 'list-3'],\r\n    lists: [\r\n        {\r\n            id: 'list-1',\r\n            title: \"My title 1\",\r\n            cardOrder: ['card-2', 'card-1', 'card-3'],\r\n            cards: [\r\n                {\r\n                    id: 'card-1',\r\n                    listId: 'list-1',\r\n                    content: \"First 1\",\r\n                },\r\n                {\r\n                    id: 'card-2',\r\n                    listId: 'list-1',\r\n                    content: \"First 2\",\r\n                },\r\n                {\r\n                    id: 'card-3',\r\n                    listId: 'list-1',\r\n                    content: \"First 3\",\r\n                },\r\n            ]\r\n        },\r\n        {\r\n            id: 'list-2',\r\n            title: \"My title 2\",\r\n            cardOrder: ['card-5', 'card-4', 'card-6'],\r\n            cards: [\r\n                {\r\n                    id: 'card-4',\r\n                    listId: 'list-2',\r\n                    content: \"Second 4\",\r\n                },\r\n                {\r\n                    id: 'card-5',\r\n                    listId: 'list-2',\r\n                    content: \"Second 5\",\r\n                },\r\n                {\r\n                    id: 'card-6',\r\n                    listId: 'list-2',\r\n                    content: \"Second 6\",\r\n                },\r\n            ]\r\n        },\r\n        {\r\n            id: 'list-3',\r\n            title: \"My title 3\",\r\n            cardOrder: ['card-8', 'card-7', 'card-9', 'card-10', 'card-11'],\r\n            cards: [\r\n                {\r\n                    id: 'card-7',\r\n                    listId: 'list-3',\r\n                    content: \"Third 7\",\r\n                },\r\n                {\r\n                    id: 'card-8',\r\n                    listId: 'list-3',\r\n                    content: \"Third 8\",\r\n                },\r\n                {\r\n                    id: 'card-9',\r\n                    listId: 'list-3',\r\n                    content: \"Third 9\",\r\n                },\r\n                {\r\n                    id: 'card-10',\r\n                    listId: 'list-3',\r\n                    content: \"Third 10\",\r\n                },\r\n                {\r\n                    id: 'card-11',\r\n                    listId: 'list-3',\r\n                    content: \"Third 11\",\r\n                },\r\n            ]\r\n        }\r\n    ]\r\n}\r\n\r\nconst listReducer = (state, action) => {\r\n    let clonedState = _.cloneDeep(state)\r\n    switch (action.type) {\r\n        case ADD_LIST: {\r\n            const listOrder = [...clonedState.listOrder, action.payload.id]\r\n            const lists = _.cloneDeep(clonedState.lists)\r\n            lists.push({\r\n                id: action.payload.id,\r\n                title: action.payload.title,\r\n                cards: action.payload.cards,\r\n                cardOrder: action.payload.cardOrder,\r\n\r\n            })\r\n\r\n\r\n            saveToLocal(\"data\", { ...clonedState, listOrder, lists })\r\n            return { ...clonedState, listOrder, lists }\r\n        }\r\n\r\n        case DELETE_LIST: {\r\n            let listId = action.payload\r\n            console.log(listId)\r\n            let listOrderIdx = clonedState.listOrder.indexOf(listId)\r\n            console.log(listId)\r\n\r\n            const listOrder = clonedState.listOrder.splice(listOrderIdx, 1)\r\n            let listIdx = clonedState.lists.indexOf(listId)\r\n            const lists = _.cloneDeep(clonedState.lists)\r\n            lists.splice(listIdx, 1)\r\n\r\n            saveToLocal(\"data\", { ...clonedState, listOrder, lists })\r\n            return { ...clonedState, listOrder, lists }\r\n        }\r\n\r\n        case ADD_CARD: {\r\n            console.log(action.payload)\r\n            const { listId, id, content } = action.payload\r\n            const lists = _.cloneDeep(clonedState.lists)\r\n\r\n            lists.map(list => {\r\n                if (list.id !== listId) {\r\n                    return list\r\n                }\r\n\r\n                // if listId is matched\r\n                list.cards.push({\r\n                    id,\r\n                    listId,\r\n                    content,\r\n                })\r\n\r\n                list.cardOrder.push(id)\r\n                return list\r\n            })\r\n\r\n            console.log(lists)\r\n\r\n            saveToLocal(\"data\", { ...clonedState, lists })\r\n            return { ...clonedState, lists }\r\n        }\r\n\r\n        case UPDATE_LIST_ORDER: {\r\n            // console.log(action.payload)\r\n            let newState = { ...clonedState, listOrder: action.payload }\r\n\r\n\r\n            saveToLocal(\"data\", newState)\r\n            // console.log(\"newState \", newState);\r\n            return newState\r\n        }\r\n\r\n        case UPDATE_CARDS_SAME_LIST: {\r\n            // console.log(action.payload)\r\n            const { listId, dragCardId, dropListId } = action.payload\r\n\r\n\r\n            \r\n            return state\r\n        }\r\n\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default listReducer \r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}